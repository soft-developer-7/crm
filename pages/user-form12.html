{% extends "base-user.html" %}
{% load static %}

{% block title %}User Form-12{% endblock%}
{% block page_heading %}Superplan Form 12 of 12{% endblock%}


{% block form_nav %}
{% if request.session.form %}


	<div class="col-md-6 text-right">
            
            
            <div class="btn-group">
              <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Goto Form Number
              </button>
               <div class="dropdown-menu">
                  <a class="dropdown-item" href="/superplan_form_number/1">1. Theme & Currency Selection</a>
				  <a class="dropdown-item" href="/superplan_form_number/2">2. Basic informations</a>
				  <a class="dropdown-item" href="/superplan_form_number/3">3. Introduction</a>
				  <a class="dropdown-item" href="/superplan_form_number/4">4. Challenges & Solutions</a>
				  <a class="dropdown-item" href="/superplan_form_number/5">5. Company Profile</a>
				  <a class="dropdown-item" href="/superplan_form_number/6">6. Management Profile</a>
				  <a class="dropdown-item" href="/superplan_form_number/7">7. Marketing Strategies</a>
				  <a class="dropdown-item" href="/superplan_form_number/8">8. Growth Strategies</a>
				  <a class="dropdown-item" href="/superplan_form_number/9">9. Industry & Competitor Analysis</a>
				  <a class="dropdown-item" href="/superplan_form_number/9-1">9.1. Hostorical Data</a>
				  <a class="dropdown-item" href="/superplan_form_number/10">10. Profit & Loss</a>
				  <a class="dropdown-item" href="/superplan_form_number/11">11. Balance Sheet</a>
				  <a class="dropdown-item" href="/superplan_form_number/12">12. CAPEX Schedule</a>
                </div>
            </div>
            
            </div> 


{% endif %}
{% endblock form_nav %}

{% block content %}


	<div class="row mb-3">	
		
	<div class="col">
		<div class="row">
			<div class="col">



				<form method="POST" action="/user_form_12_submit" enctype="multipart/form-data">
				{% csrf_token %}
					<div class="card shadow mb-3">
						<div class="card-header py-3">
						<p class="text-primary m-0 font-weight-bold">CAPEX Schedule </p>
						</div>
					<div class="card-body">


				<p class="text-danger" style="font-weight:bold;"><i>**Note : Light-Blue highlighted box can take percentage value and normal amount value also. Eg. for 17 percentage please type 17%. The text will be green it means it is a percentage value. Without the % symbol system will be treated as a normal amount value. The text will be black.</i></p>
				<br>
				<div style="background-color:rgba(0,255,235,0.13);display:inline-block;padding:20px;">
				<p style="color:darkgreen;">Green Text = percentage value (%)</p>
				<p style="color:black;">Black Text = Normal amount value </p>
				</div>
				<br><br>





					
				<div class="form-row text-center">
						
						<div class="col-md-4 border-right">
							<div class="form-group">
							
							</div>
						</div>

						<div class="col border-right">
							<div class="form-group">
								<select id="year1_select" class="form-control" name="capex_years[]">
									<option value="Year1">Year1</option>
									{% for i in request.session.years %}
										<option value="{{i}}">{{ i }}</option>
									{% endfor %}
								</select>
								
							</div>
						</div>

						<div class="col border-right">
							<div class="form-group">
								<input type="text" value="Year2" readonly class="form-control" name="capex_years[]"/>	
							</div>
						</div>

						<div class="col border-right">
							<div class="form-group">
								<input type="text" value="Year3" readonly class="form-control" name="capex_years[]"/>
							</div>
						</div>

						<div class="col border-right">
							<div class="form-group">
								<input type="text" value="Year4" readonly class="form-control" name="capex_years[]"/>
							</div>
						</div>

						<div class="col border-right">
							<div class="form-group">
								<input type="text" value="Year5" readonly class="form-control" name="capex_years[]"/>
							</div>
						</div>
				</div>
				<hr>





				
					<div id="" class="form-row">
						
						<div class="col-4">
							<div class="form-group">
								<label ><strong> Opening Gross  </strong> <a href="#"  data-toggle="tooltip" title="Help text."><i class="far fa-question-circle"></i></a>  </label>
									
								<div class="perc_helper_h form-group text-info">

										<label class="radio-inline">
											<input type="radio" class="r" name="" value="amnt"> Amount   &nbsp; &nbsp; &nbsp;
										</label>

										<label class="radio-inline">
											<input type="radio" class="r" name="" value="perc" checked> %  
										</label>

									</div>

								</div>
						</div>

						

						<div class="col">
							<div class="form-group">
								<input type="text"  class="form-control {% if data.historical_xl_data %} text_input {%else %} text_input_nh {% endif %}" name="capex_opening_gross[]"   maxlength="20" minlength="1"  />
								</div>
						</div>

						<div class="col">
							<div class="form-group d-none">
								<input type="text" class="form-control text_input" name="capex_opening_gross[]"  maxlength="20" minlength="1"  />
									<div class="perc_helper_h">% value</div>
								</div>
						</div>
						<div class="col">
							<div class="form-group d-none">
								<input type="text" class="form-control text_input" name="capex_opening_gross[]"   maxlength="20" minlength="1"  />
									<div class="perc_helper_h">% value</div>
								</div>
						</div>
						<div class="col">
							<div class="form-group d-none">
								<input type="text" class="form-control text_input" name="capex_opening_gross[]"   maxlength="20" minlength="1"  />
									<div class="perc_helper_h">% value</div>
								</div>
						</div>
						<div class="col">
							<div class="form-group d-none">
								<input type="text" class="form-control text_input" name="capex_opening_gross[]"  maxlength="20" minlength="1"  />
									<div class="perc_helper_h">% value</div>
								</div>
						</div>
						
						
                       
				</div>








					<div id="cr2" class="form-row">
						
						<div class="col-4">
							<div class="form-group">
								<label ><strong> Additions  </strong> <a href="#"  data-toggle="tooltip" title="Help text."><i class="far fa-question-circle"></i></a>  </label>
									
								<div class="form-group text-info d-none">

										<label class="radio-inline">
											<input type="radio" class="r2" name="capex_additions_or" value="amnt"> Amount   &nbsp; &nbsp; &nbsp;
										</label>

										<label class="radio-inline">
											<input type="radio" class="r2" name="capex_additions_or" value="perc" checked> %  
										</label>

									</div>

								</div>
						</div>

						

						<div class="col">
							<div class="form-group">
								<input type="text"  class="form-control {% if data.historical_xl_data %} text_input {%else %} text_input_nh {% endif %}" name="capex_additions[]"   maxlength="20" minlength="1"  />
								<div class="perc_helper_h">% value</div>
								</div>
						</div>

						<div class="col">
							<div class="form-group">
								<input type="text" class="form-control text_input"  name="capex_additions[]"  maxlength="20" minlength="1"  />
									<div class="perc_helper_h">% value</div>
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="text" class="form-control text_input"  name="capex_additions[]"   maxlength="20" minlength="1"  />
									<div class="perc_helper_h">% value</div>
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="text" class="form-control text_input" name="capex_additions[]"   maxlength="20" minlength="1"  />
									<div class="perc_helper_h">% value</div>
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="text" class="form-control text_input" name="capex_additions[]"  maxlength="20" minlength="1"  />
									<div class="perc_helper_h">% value</div>
								</div>
						</div>
						
						
                       
				</div>

                
				

          			<div id="cr3" class="form-row">
						
						<div class="col-4">
							<div class="form-group">
								<label ><strong> Additions - Intangible   </strong> <a href="#"  data-toggle="tooltip" title="Help text."><i class="far fa-question-circle"></i></a>  </label>
									
								<div class="form-group text-info d-none">

										<label class="radio-inline">
											<input type="radio" class="r3" name="capex_additions_intangible_or" value="amnt"> Amount   &nbsp; &nbsp; &nbsp;
										</label>

										<label class="radio-inline">
											<input type="radio" class="r3" name="capex_additions_intangible_or" value="perc" checked> % 
										</label>

									</div>

								</div>
						</div>

						

						<div class="col">
							<div class="form-group">
								<input type="text"  class="form-control {% if data.historical_xl_data %} text_input {%else %} text_input_nh {% endif %}" name="capex_additions_intangible[]"   maxlength="20" minlength="1"  />
								<div class="perc_helper_h">% value</div>
								</div>
						</div>

						<div class="col">
							<div class="form-group">
								<input type="text" class="form-control text_input"  class="form-control" name="capex_additions_intangible[]"  maxlength="20" minlength="1"  />
									<div class="perc_helper_h">% value</div>
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="text" class="form-control text_input"  class="form-control" name="capex_additions_intangible[]"   maxlength="20" minlength="1"  />
									<div class="perc_helper_h">% value</div>
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="text" class="form-control text_input"  class="form-control" name="capex_additions_intangible[]"   maxlength="20" minlength="1"  />
									<div class="perc_helper_h">% value</div>
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="text" class="form-control text_input"  class="form-control" name="capex_additions_intangible[]"  maxlength="20" minlength="1"  />
									<div class="perc_helper_h">% value</div>
								</div>
						</div>
						
						
                       
				</div>
				
				

                 	<div id="cr4" class="form-row">
						
						<div class="col-4">
							<div class="form-group">
								<label ><strong> Deletions  </strong> <a href="#"  data-toggle="tooltip" title="Help text."><i class="far fa-question-circle"></i></a>  </label>
									
								<div class="form-group text-info d-none">

										<label class="radio-inline">
											<input type="radio" class="r4" name="capex_deletions_or" value="amnt"> Amount   &nbsp; &nbsp; &nbsp;
										</label>

										<label class="radio-inline">
											<input type="radio" class="r4" name="capex_deletions_or" value="perc" checked> % 
										</label>

									</div>

								</div>
						</div>

						

						<div class="col">
							<div class="form-group">
								<input type="text"  class="form-control {% if data.historical_xl_data %} text_input {%else %} text_input_nh {% endif %}" name="capex_deletions[]"   maxlength="20" minlength="1"  />
								<div class="perc_helper_h">% value</div>
								</div>
						</div>

						<div class="col">
							<div class="form-group">
								<input type="text" class="form-control text_input" name="capex_deletions[]"  maxlength="20" minlength="1"  />
									<div class="perc_helper_h">% value</div>
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="text" class="form-control text_input" name="capex_deletions[]"   maxlength="20" minlength="1"  />
									<div class="perc_helper_h">% value</div>
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="text" class="form-control text_input" name="capex_deletions[]"   maxlength="20" minlength="1"  />
									<div class="perc_helper_h">% value</div>
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="text" class="form-control text_input" name="capex_deletions[]"  maxlength="20" minlength="1"  />
									<div class="perc_helper_h">% value</div>
								</div>
						</div>
						
						
                       
				</div>
        		
						




						<div  class="form-row">
						
						<div class="col-4">
							<div class="form-group">
								<label ><strong> Average Depreciation Rate (%)  </strong> <a href="#"  data-toggle="tooltip" title="Help text."><i class="far fa-question-circle"></i></a>  </label>
									
								

								</div>
						</div>

						

						<div class="col">
							<div class="form-group">
								<input type="text" class="form-control text_input_p" name="capex_average_depreciation_rate[]"   maxlength="20" minlength="1"  />
								<div class="perc_helper_h">% value</div></div>
						</div>

						<div class="col">
							<div class="form-group">
								<input type="text" class="form-control text_input_p" name="capex_average_depreciation_rate[]"  maxlength="20" minlength="1"  />
									<div class="perc_helper_h">% value</div>
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="text" class="form-control text_input_p" name="capex_average_depreciation_rate[]"   maxlength="20" minlength="1"  />
									<div class="perc_helper_h">% value</div>
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="text" class="form-control text_input_p" name="capex_average_depreciation_rate[]"   maxlength="20" minlength="1"  />
									<div class="perc_helper_h">% value</div>
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="text" class="form-control text_input_p" name="capex_average_depreciation_rate[]"  maxlength="20" minlength="1"  />
									<div class="perc_helper_h">% value</div>
								</div>
						</div>
						
						
                       
				</div>





					<br>
			<br>
			<hr>
			<div class="form-row">
				<div class="col-md-4 text-center p-1">
					<a class="btn btn-primary"  href="/superplan_form_number/11"><i class="fas fa-arrow-circle-left"></i> Previous form</a>
				</div>

				<div class="col-md-4 text-center p-1">
					<button class="btn btn-success" type="submit"> <b> Save & Next </b></button>
				</div>

				<div class="col-md-4 text-center p-1">
					<a class="btn btn-danger disabled"  href="/superplan_form_number/12">Skip <i class="fas fa-arrow-circle-right"></i></i></a>
				</div>

			</div>
					
		</div>
	</div>
</form>
</div>
</div>
</div>
</div>


<script>
/*
$("input[name='company_owned_land_and_building[]']").focusout(function(){total_expense();});
$("input[name='other_fixed_assets[]']").focusout(function(){total_expense();});
$("input[name='depreciation_growth_or_amount[]']").focusout(function(){total_expense();});

function total_expense(){
	
	for (var i=0; i<5;i++)
	{
		var total = 0;
		var c_a = $("input[name='company_owned_land_and_building[]']")[i].value;
		var o_a = $("input[name='other_fixed_assets[]']")[i].value;
		var d_a = $("input[name='depreciation_growth_or_amount[]']")[i].value;
		if(c_a){total+=parseFloat(c_a)};
		if(o_a){total+=parseFloat(o_a)}
		if(d_a){total+=parseFloat(d_a)}
		$("input[name='total_capex_expense[]']")[i].value=total;
	}
}
*/


/*

$('input[type=radio]').change(function(){
	var cls_name = $(this).attr("class");
	var rad_val = $(this).val();
	var inputboxes = $("#c"+cls_name+' input[type=number]');
	
	if(rad_val=="amnt")
	{
		$("#c"+cls_name+" .perc_helper").hide();
		for(var i=1;i<inputboxes.length;i++)
			{
				$(inputboxes[i]).removeAttr('min');
				$(inputboxes[i]).removeAttr('max');
			}
	}

	if(rad_val=="perc")
	{
		$("#c"+cls_name+" .perc_helper").show();
		for(var i=1;i<inputboxes.length;i++)
			{
				$(inputboxes[i]).attr('min','0');
				$(inputboxes[i]).attr('max','100');
			}
	}
	
		
});

*/







/*--------------------------------------------------- Input validation ---------------------------------------------------*/

$('.text_input').on("input",function(){
	var inp_val = $(this).val();


	if((inp_val.match(/%/g)||[]).length==1 && inp_val[(inp_val.length - 1)]=="%")
	{
		inp_val=inp_val.replace(/%/g,"");

		if(inp_val && !isNaN(inp_val))
		{
			var f = parseFloat(inp_val);
			if(f>100 || f<0)
			{
				alert("Please enter a valid value. (0.01 to 100)");
				$(this).val("");
			}

			else
			{
				$(this).css("color", "darkgreen");
			}
		}
		else
		{
			alert("Please enter a valid value");
			$(this).val("");
		}
	}

	else if(isNaN(inp_val))
		{
			alert("Please enter a valid value");
			$(this).val("");
		}
	else{
		$(this).css("color", "black");
	}



});




/*--------------------------------------------------- Input validation Non Historical -------------------------------------------*/

$('.text_input_nh').on("input",function(){
	var inp_val = $(this).val();


	if(inp_val.indexOf("%")>-1)
	{
		
		alert("You don't have Historical data.\n So, Year1 can not be in percentage format!");
		$(this).val("");
		
	}

	else if(isNaN(inp_val))
		{
			alert("Please enter a valid value");
			$(this).val("");
		}



});


/*--------------------------------------------------- Input validation only perc---------------------------------------------*/

$('.text_input_p').change(function(){
	var inp_val = $(this).val();


	if((inp_val.match(/%/g)||[]).length==1 && inp_val[(inp_val.length - 1)]=="%")
	{
		inp_val=inp_val.replace(/%/g,"");

		if(inp_val && !isNaN(inp_val))
		{
			var f = parseFloat(inp_val);
			if(f>100 || f<0)
			{
				alert("Please enter a valid value. (0.01 to 100)");
				$(this).val("");
			}

			else
			{
				$(this).css("color", "darkgreen");
			}
		}
		else
		{
			alert("Please enter a valid  % value, eg. 17%");
			$(this).val("");
		}
	}

	else
		{
			alert("Please enter a valid  % value, eg. 17%");
			$(this).val("");
		}




});













/* Year dynamic change */

var year=0;
$("#year1_select").change(function(){
	var s_name = $(this).attr('name')
	var all_years = $('select[name="'+s_name+'"]')
	
	if(!isNaN($(this).val()))
	{
		year = parseInt($(this).val());
		for(var i=0;i<5;i++)
		{
			$('[name="'+s_name+'"]')[i].value=year+i;
		}
	}
	else
	{
		alert("Please correctly select the Year1");
		$('[name="'+s_name+'"]')[0].value="Year1";
		$('[name="'+s_name+'"]')[1].value="Year2";
		$('[name="'+s_name+'"]')[2].value="Year3";
		$('[name="'+s_name+'"]')[3].value="Year4";
		$('[name="'+s_name+'"]')[4].value="Year5";
	}
	
});

</script>

{% endblock %}