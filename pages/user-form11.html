{% extends "base-user.html" %}
{% load static %}

{% block title %}User Form-11{% endblock%}
{% block page_heading %}Superplan Form 11 of 12{% endblock%}


{% block form_nav %}
{% if request.session.form %}


	<div class="col-md-6 text-right">
            
            
            <div class="btn-group">
              <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Goto Form Number
              </button>
               <div class="dropdown-menu">
                  <a class="dropdown-item" href="/superplan_form_number/1">1. Theme & Currency Selection</a>
				  <a class="dropdown-item" href="/superplan_form_number/2">2. Basic informations</a>
				  <a class="dropdown-item" href="/superplan_form_number/3">3. Introduction</a>
				  <a class="dropdown-item" href="/superplan_form_number/4">4. Challenges & Solutions</a>
				  <a class="dropdown-item" href="/superplan_form_number/5">5. Company Profile</a>
				  <a class="dropdown-item" href="/superplan_form_number/6">6. Management Profile</a>
				  <a class="dropdown-item" href="/superplan_form_number/7">7. Marketing Strategies</a>
				  <a class="dropdown-item" href="/superplan_form_number/8">8. Growth Strategies</a>
				  <a class="dropdown-item" href="/superplan_form_number/9">9. Industry & Competitor Analysis</a>
				  <a class="dropdown-item" href="/superplan_form_number/9-1">9.1. Hostorical Data</a>
				  <a class="dropdown-item" href="/superplan_form_number/10">10. Profit & Loss</a>
				  <a class="dropdown-item" href="/superplan_form_number/11">11. CAPEX Schedule</a>
				  <a class="dropdown-item" href="/superplan_form_number/12">12. Balance Sheet</a>
                </div>
            </div>
            
            </div> 


{% endif %}
{% endblock form_nav %}

{% block content %}


	<div class="row mb-3">	
		
	<div class="col">
		<div class="row">
			<div class="col">



				<form method="POST" action="/user_form_11_submit" enctype="multipart/form-data">
				{% csrf_token %}
					<div class="card shadow mb-3">
						<div class="card-header py-3">
						<p class="text-primary m-0 font-weight-bold">CAPEX Schedule </p>
						</div>
					<div class="card-body">


				

<p class="text-danger" style="font-weight:bold;"><i>**Note : Input of the <span  style="color:black;background-color:rgba(255,0,23,0.08);">&nbsp; Brown cells &nbsp;</span> will treated as percentage. Like if you put 17 then it will be treated as 17%</i></p>
				<br>



					
				<div class="form-row text-center">
						
						<div class="col-md-4 border-right">
							<div class="form-group">
							
							</div>
						</div>

						<div class="col border-right">
							<div class="form-group">
								<select id="year1_select" class="form-control" name="capex_years[]">
									<option {% if data.capex_years.f_1 %} value="{{data.capex_years.f_1}}" {% else %} value="Year1" {% endif %} >
									{% if data.capex_years.f_1 %} {{data.capex_years.f_1}} {% else %} Year1 {% endif %}
									</option>


									{% for i in request.session.years %}
										<option value="{{i}}">{{ i }}</option>
									{% endfor %}
								</select>
								
							</div>
						</div>

						<div class="col border-right">
							<div class="form-group">
								<input type="text"  {% if data.capex_years.f_2 %} value="{{data.capex_years.f_2}}" {% else %} value="Year2" {% endif %} readonly class="form-control" name="capex_years[]"/>	
							</div>
						</div>

						<div class="col border-right">
							<div class="form-group">
								<input type="text"  {% if data.capex_years.f_3 %} value="{{data.capex_years.f_3}}" {% else %} value="Year2" {% endif %} readonly class="form-control" name="capex_years[]"/>
							</div>
						</div>

						<div class="col border-right">
							<div class="form-group">
								<input type="text"  {% if data.capex_years.f_4 %} value="{{data.capex_years.f_4}}" {% else %} value="Year2" {% endif %} readonly class="form-control" name="capex_years[]"/>
							</div>
						</div>

						<div class="col border-right">
							<div class="form-group">
								<input type="text"  {% if data.capex_years.f_5 %} value="{{data.capex_years.f_5}}" {% else %} value="Year2" {% endif %} readonly class="form-control" name="capex_years[]"/>
							</div>
						</div>
				</div>
				<hr>





				
					<div id="" class="form-row">
						
						<div class="col-4">
							<div class="form-group">
								<label ><strong> Opening Gross  </strong> <a href="#"  data-toggle="tooltip" title="Help text."><i class="far fa-question-circle"></i></a>  </label>
									

								</div>
						</div>

						

						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control" name="capex_opening_gross[]" {% if data.capex_opening_gross.f_1 %} value="{{data.capex_opening_gross.f_1}}" {% endif %}   maxlength="20" minlength="1"  />
								</div>
						</div>

						<div class="col">
							<div class="form-group d-none">
								<input type="text" class="form-control" name="capex_opening_gross[]"  maxlength="20" minlength="1"  />
									
								</div>
						</div>
						<div class="col">
							<div class="form-group d-none">
								<input type="text" class="form-control" name="capex_opening_gross[]"   maxlength="20" minlength="1"  />
									
								</div>
						</div>
						<div class="col">
							<div class="form-group d-none">
								<input type="text" class="form-control" name="capex_opening_gross[]"   maxlength="20" minlength="1"  />
									
								</div>
						</div>
						<div class="col">
							<div class="form-group d-none">
								<input type="text" class="form-control" name="capex_opening_gross[]"  maxlength="20" minlength="1"  />
									
								</div>
						</div>
						
						
                       
				</div>








					<div id="cr2" class="form-row">
						
						<div class="col-4">
							<div class="form-group">
								<label ><strong> Additions  </strong> <a href="#"  data-toggle="tooltip" title="Help text."><i class="far fa-question-circle"></i></a>  </label>
									

								</div>
						</div>

						

						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control  ptext_input {% if data.historical_xl_data.capex_schedule_additions.f_3 %} ptext_input_c {% endif %}" name="capex_additions[]" {% if data.capex_additions.f_1 %} value="{{data.capex_additions.f_1}}" {% endif %}   maxlength="20" minlength="1"  />
								
								</div>
						</div>

						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control  ptext_input ptext_input_c"  name="capex_additions[]" {% if data.capex_additions.f_2 %} value="{{data.capex_additions.f_2}}" {% endif %}  maxlength="20" minlength="1"  />
									
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control  ptext_input ptext_input_c"  name="capex_additions[]" {% if data.capex_additions.f_3 %} value="{{data.capex_additions.f_3}}" {% endif %}   maxlength="20" minlength="1"  />
									
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control  ptext_input ptext_input_c" name="capex_additions[]" {% if data.capex_additions.f_4 %} value="{{data.capex_additions.f_4}}" {% endif %}   maxlength="20" minlength="1"  />
									
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control  ptext_input ptext_input_c" name="capex_additions[]" {% if data.capex_additions.f_5 %} value="{{data.capex_additions.f_5}}" {% endif %}  maxlength="20" minlength="1"  />
									
								</div>
						</div>
						
						
                       
				</div>

                
				

          			<div id="cr3" class="form-row">
						
						<div class="col-4">
							<div class="form-group">
								<label ><strong> Additions - Intangible   </strong> <a href="#"  data-toggle="tooltip" title="Help text."><i class="far fa-question-circle"></i></a>  </label>
									
						

								</div>
						</div>

						

						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control  ptext_input {% if data.historical_xl_data.capex_schedule_additions_intangible.f_3 %} ptext_input_c {% endif %}" name="capex_additions_intangible[]" {% if data.capex_additions_intangible.f_1 %} value="{{data.capex_additions_intangible.f_1}}" {% endif %}   maxlength="20" minlength="1"  />
								
								</div>
						</div>

						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control  ptext_input ptext_input_c" name="capex_additions_intangible[]" {% if data.capex_additions_intangible.f_2 %} value="{{data.capex_additions_intangible.f_2}}" {% endif %}  maxlength="20" minlength="1"  />
									
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control  ptext_input ptext_input_c" name="capex_additions_intangible[]" {% if data.capex_additions_intangible.f_3 %} value="{{data.capex_additions_intangible.f_3}}" {% endif %}   maxlength="20" minlength="1"  />
									
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control  ptext_input ptext_input_c" name="capex_additions_intangible[]" {% if data.capex_additions_intangible.f_4 %} value="{{data.capex_additions_intangible.f_4}}" {% endif %}   maxlength="20" minlength="1"  />
									
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control  ptext_input ptext_input_c" name="capex_additions_intangible[]" {% if data.capex_additions_intangible.f_5 %} value="{{data.capex_additions_intangible.f_5}}" {% endif %}  maxlength="20" minlength="1"  />
									
								</div>
						</div>
						
						
                       
				</div>
				
				

                 	<div id="cr4" class="form-row">
						
						<div class="col-4">
							<div class="form-group">
								<label ><strong> Deletions  </strong> <a href="#"  data-toggle="tooltip" title="Help text."><i class="far fa-question-circle"></i></a>  </label>
									
							

								</div>
						</div>

						

						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control  ptext_input {% if data.historical_xl_data.capex_schedule_deletions.f_3 %} ptext_input_c {% endif %}" name="capex_deletions[]" {% if data.capex_deletions.f_1 %} value="{{data.capex_deletions.f_1}}" {% endif %}   maxlength="20" minlength="1"  />
								
								</div>
						</div>

						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control  ptext_input ptext_input_c" name="capex_deletions[]" {% if data.capex_deletions.f_2 %} value="{{data.capex_deletions.f_2}}" {% endif %}  maxlength="20" minlength="1"  />
									
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control  ptext_input ptext_input_c" name="capex_deletions[]" {% if data.capex_deletions.f_3 %} value="{{data.capex_deletions.f_3}}" {% endif %}   maxlength="20" minlength="1"  />
									
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control  ptext_input ptext_input_c" name="capex_deletions[]" {% if data.capex_deletions.f_4 %} value="{{data.capex_deletions.f_4}}" {% endif %}   maxlength="20" minlength="1"  />
									
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control  ptext_input ptext_input_c" name="capex_deletions[]" {% if data.capex_deletions.f_5 %} value="{{data.capex_deletions.f_5}}" {% endif %}  maxlength="20" minlength="1"  />
									
								</div>
						</div>
						
						
                       
				</div>
        		
						




						<div  class="form-row">
						
						<div class="col-4">
							<div class="form-group">
								<label ><strong> Average Depreciation Rate (%)  </strong> <a href="#"  data-toggle="tooltip" title="Help text."><i class="far fa-question-circle"></i></a>  </label>
									
								

								</div>
						</div>

						

						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control  ptext_input_smp ptext_input_c" name="capex_average_depreciation_rate[]" {% if data.capex_average_depreciation_rate.f_1 %} value="{{data.capex_average_depreciation_rate.f_1}}" {% endif %}   maxlength="20" minlength="1"  />
								</div>
						</div>

						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control  ptext_input_smp ptext_input_c" name="capex_average_depreciation_rate[]" {% if data.capex_average_depreciation_rate.f_2 %} value="{{data.capex_average_depreciation_rate.f_2}}" {% endif %}  maxlength="20" minlength="1"  />
									
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control  ptext_input_smp ptext_input_c" name="capex_average_depreciation_rate[]" {% if data.capex_average_depreciation_rate.f_3 %} value="{{data.capex_average_depreciation_rate.f_3}}" {% endif %}   maxlength="20" minlength="1"  />
									
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control  ptext_input_smp ptext_input_c" name="capex_average_depreciation_rate[]" {% if data.capex_average_depreciation_rate.f_4 %} value="{{data.capex_average_depreciation_rate.f_4}}" {% endif %}   maxlength="20" minlength="1"  />
									
								</div>
						</div>
						<div class="col">
							<div class="form-group">
								<input type="number" min=0 step=0.001  class="form-control  ptext_input_smp ptext_input_c" name="capex_average_depreciation_rate[]" {% if data.capex_average_depreciation_rate.f_5 %} value="{{data.capex_average_depreciation_rate.f_5}}" {% endif %}  maxlength="20" minlength="1"  />
									
								</div>
						</div>
						
						
                       
				</div>








				<br><br><button type="button" class="btn btn-warning" onclick="projection(1);">Show or Hide Projection Report</button>

				<!-- Capex Projection table -->
				<div id="table1" style="display:none;"><br>
									<table  class="table text-dark">
										<thead>
											<tr>
												<th scope="col"></th>
												<th  class="year_1" scope="col"> {% if data.capex_years.f_1 %} {{data.capex_years.f_1}} {% else %} Year 1 {% endif %} </th>
												<th  class="year_2" scope="col">{% if data.capex_years.f_2 %} {{data.capex_years.f_2}} {% else %} Year 2 {% endif %}</th>
												<th  class="year_3" scope="col">{% if data.capex_years.f_3 %} {{data.capex_years.f_3}} {% else %} Year 3 {% endif %}</th>
												<th  class="year_4" scope="col">{% if data.capex_years.f_4 %} {{data.capex_years.f_4}} {% else %} Year 4 {% endif %}</th>
												<th  class="year_5" scope="col">{% if data.capex_years.f_5 %} {{data.capex_years.f_5}} {% else %} Year 5 {% endif %}</th>
											</tr>
										</thead>
											<tbody>

												<tr id="capex_opening_gross">
													<th scope="row">Opening Gross</th>
													<td>{% if data.projection_table.p_capex_opening_gross.f_1 %} {{data.projection_table.p_capex_opening_gross.f_1}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_capex_opening_gross.f_2 %} {{data.projection_table.p_capex_opening_gross.f_2}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_capex_opening_gross.f_3 %} {{data.projection_table.p_capex_opening_gross.f_3}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_capex_opening_gross.f_4 %} {{data.projection_table.p_capex_opening_gross.f_4}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_capex_opening_gross.f_5 %} {{data.projection_table.p_capex_opening_gross.f_5}} {%else%} -- {% endif %}</td>

													<input hidden name="capex_opening_gross_[]" {% if data.projection_table.p_capex_opening_gross.f_1 %} value={{data.projection_table.p_capex_opening_gross.f_1}}  {% else %} value=0 {% endif %}>
													<input hidden name="capex_opening_gross_[]" {% if data.projection_table.p_capex_opening_gross.f_2 %} value={{data.projection_table.p_capex_opening_gross.f_2}}  {% else %} value=0 {% endif %}>
													<input hidden name="capex_opening_gross_[]" {% if data.projection_table.p_capex_opening_gross.f_3 %} value={{data.projection_table.p_capex_opening_gross.f_3}}  {% else %} value=0 {% endif %}>
													<input hidden name="capex_opening_gross_[]" {% if data.projection_table.p_capex_opening_gross.f_4 %} value={{data.projection_table.p_capex_opening_gross.f_4}}  {% else %} value=0 {% endif %}>
													<input hidden name="capex_opening_gross_[]" {% if data.projection_table.p_capex_opening_gross.f_5 %} value={{data.projection_table.p_capex_opening_gross.f_5}}  {% else %} value=0 {% endif %}>
												</tr>


												<tr id="capex_additions">
													<th scope="row">Additions</th>
													<td>{% if data.projection_table.p_capex_additions.f_1 %} {{data.projection_table.p_capex_additions.f_1}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_capex_additions.f_2 %} {{data.projection_table.p_capex_additions.f_2}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_capex_additions.f_3 %} {{data.projection_table.p_capex_additions.f_3}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_capex_additions.f_4 %} {{data.projection_table.p_capex_additions.f_4}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_capex_additions.f_5 %} {{data.projection_table.p_capex_additions.f_5}} {%else%} -- {% endif %}</td>

													<input hidden name="capex_additions_[]" {% if data.projection_table.p_capex_additions.f_1 %} value={{data.projection_table.p_capex_additions.f_1}}  {% else %} value=0 {% endif %}>
													<input hidden name="capex_additions_[]" {% if data.projection_table.p_capex_additions.f_2 %} value={{data.projection_table.p_capex_additions.f_2}}  {% else %} value=0 {% endif %}>
													<input hidden name="capex_additions_[]" {% if data.projection_table.p_capex_additions.f_3 %} value={{data.projection_table.p_capex_additions.f_3}}  {% else %} value=0 {% endif %}>
													<input hidden name="capex_additions_[]" {% if data.projection_table.p_capex_additions.f_4 %} value={{data.projection_table.p_capex_additions.f_4}}  {% else %} value=0 {% endif %}>
													<input hidden name="capex_additions_[]" {% if data.projection_table.p_capex_additions.f_5 %} value={{data.projection_table.p_capex_additions.f_5}}  {% else %} value=0 {% endif %}>
												</tr>


												<tr id="capex_additions_intangible">
													<th scope="row">Additions - Intangible</th>
													<td>{% if data.projection_table.p_capex_additions_intangible.f_1 %} {{data.projection_table.p_capex_additions_intangible.f_1}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_capex_additions_intangible.f_2 %} {{data.projection_table.p_capex_additions_intangible.f_2}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_capex_additions_intangible.f_3 %} {{data.projection_table.p_capex_additions_intangible.f_3}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_capex_additions_intangible.f_4 %} {{data.projection_table.p_capex_additions_intangible.f_4}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_capex_additions_intangible.f_5 %} {{data.projection_table.p_capex_additions_intangible.f_5}} {%else%} -- {% endif %}</td>

													<input hidden name="capex_additions_intangible_[]" {% if data.projection_table.p_capex_additions_intangible.f_1 %} value={{data.projection_table.p_capex_additions_intangible.f_1}}  {% else %} value=0 {% endif %}>
													<input hidden name="capex_additions_intangible_[]" {% if data.projection_table.p_capex_additions_intangible.f_2 %} value={{data.projection_table.p_capex_additions_intangible.f_2}}  {% else %} value=0 {% endif %}>
													<input hidden name="capex_additions_intangible_[]" {% if data.projection_table.p_capex_additions_intangible.f_3 %} value={{data.projection_table.p_capex_additions_intangible.f_3}}  {% else %} value=0 {% endif %}>
													<input hidden name="capex_additions_intangible_[]" {% if data.projection_table.p_capex_additions_intangible.f_4 %} value={{data.projection_table.p_capex_additions_intangible.f_4}}  {% else %} value=0 {% endif %}>
													<input hidden name="capex_additions_intangible_[]" {% if data.projection_table.p_capex_additions_intangible.f_5 %} value={{data.projection_table.p_capex_additions_intangible.f_5}}  {% else %} value=0 {% endif %}>
												</tr>

												<tr id="capex_deletions">
													<th scope="row">Deletions</th>
													<td>{% if data.projection_table.p_capex_deletions.f_1 %} {{data.projection_table.p_capex_deletions.f_1}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_capex_deletions.f_2 %} {{data.projection_table.p_capex_deletions.f_2}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_capex_deletions.f_3 %} {{data.projection_table.p_capex_deletions.f_3}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_capex_deletions.f_4 %} {{data.projection_table.p_capex_deletions.f_4}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_capex_deletions.f_5 %} {{data.projection_table.p_capex_deletions.f_5}} {%else%} -- {% endif %}</td>

													<input hidden name="capex_deletions_[]" {% if data.projection_table.p_capex_deletions.f_1 %} value={{data.projection_table.p_capex_deletions.f_1}}  {% else %} value=0 {% endif %}>
													<input hidden name="capex_deletions_[]" {% if data.projection_table.p_capex_deletions.f_2 %} value={{data.projection_table.p_capex_deletions.f_2}}  {% else %} value=0 {% endif %}>
													<input hidden name="capex_deletions_[]" {% if data.projection_table.p_capex_deletions.f_3 %} value={{data.projection_table.p_capex_deletions.f_3}}  {% else %} value=0 {% endif %}>
													<input hidden name="capex_deletions_[]" {% if data.projection_table.p_capex_deletions.f_4 %} value={{data.projection_table.p_capex_deletions.f_4}}  {% else %} value=0 {% endif %}>
													<input hidden name="capex_deletions_[]" {% if data.projection_table.p_capex_deletions.f_5 %} value={{data.projection_table.p_capex_deletions.f_5}}  {% else %} value=0 {% endif %}>
												</tr>

												<tr id="closing_gross">
													<th scope="row">Closing Gross</th>
													<td>{% if data.projection_table.p_closing_gross.f_1 %} {{data.projection_table.p_closing_gross.f_1}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_closing_gross.f_2 %} {{data.projection_table.p_closing_gross.f_2}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_closing_gross.f_3 %} {{data.projection_table.p_closing_gross.f_3}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_closing_gross.f_4 %} {{data.projection_table.p_closing_gross.f_4}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_closing_gross.f_5 %} {{data.projection_table.p_closing_gross.f_5}} {%else%} -- {% endif %}</td>

													<input hidden name="closing_gross_[]" {% if data.projection_table.p_closing_gross.f_1 %} value={{data.projection_table.p_closing_gross.f_1}}  {% else %} value=0 {% endif %}>
													<input hidden name="closing_gross_[]" {% if data.projection_table.p_closing_gross.f_2 %} value={{data.projection_table.p_closing_gross.f_2}}  {% else %} value=0 {% endif %}>
													<input hidden name="closing_gross_[]" {% if data.projection_table.p_closing_gross.f_3 %} value={{data.projection_table.p_closing_gross.f_3}}  {% else %} value=0 {% endif %}>
													<input hidden name="closing_gross_[]" {% if data.projection_table.p_closing_gross.f_4 %} value={{data.projection_table.p_closing_gross.f_4}}  {% else %} value=0 {% endif %}>
													<input hidden name="closing_gross_[]" {% if data.projection_table.p_closing_gross.f_5 %} value={{data.projection_table.p_closing_gross.f_5}}  {% else %} value=0 {% endif %}>
												</tr>

												<tr id="accumulated_depreciation">
													<th scope="row">Accumulated Depreciation</th>
													<td>{% if data.projection_table.p_accumulated_depreciation.f_1 %} {{data.projection_table.p_accumulated_depreciation.f_1 |floatformat}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_accumulated_depreciation.f_2 %} {{data.projection_table.p_accumulated_depreciation.f_2 |floatformat}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_accumulated_depreciation.f_3 %} {{data.projection_table.p_accumulated_depreciation.f_3 |floatformat}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_accumulated_depreciation.f_4 %} {{data.projection_table.p_accumulated_depreciation.f_4 |floatformat}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_accumulated_depreciation.f_5 %} {{data.projection_table.p_accumulated_depreciation.f_5 |floatformat}} {%else%} -- {% endif %}</td>

													<input hidden name="accumulated_depreciation_[]" {% if data.projection_table.p_accumulated_depreciation.f_1 %} value={{data.projection_table.p_accumulated_depreciation.f_1}}  {% else %} value=0 {% endif %}>
													<input hidden name="accumulated_depreciation_[]" {% if data.projection_table.p_accumulated_depreciation.f_2 %} value={{data.projection_table.p_accumulated_depreciation.f_2}}  {% else %} value=0 {% endif %}>
													<input hidden name="accumulated_depreciation_[]" {% if data.projection_table.p_accumulated_depreciation.f_3 %} value={{data.projection_table.p_accumulated_depreciation.f_3}}  {% else %} value=0 {% endif %}>
													<input hidden name="accumulated_depreciation_[]" {% if data.projection_table.p_accumulated_depreciation.f_4 %} value={{data.projection_table.p_accumulated_depreciation.f_4}}  {% else %} value=0 {% endif %}>
													<input hidden name="accumulated_depreciation_[]" {% if data.projection_table.p_accumulated_depreciation.f_5 %} value={{data.projection_table.p_accumulated_depreciation.f_5}}  {% else %} value=0 {% endif %}>
												</tr>

												<tr id="net_value">
													<th scope="row">Net value</th>
													<td>{% if data.projection_table.p_net_value.f_1 %} {{data.projection_table.p_net_value.f_1 |floatformat}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_net_value.f_2 %} {{data.projection_table.p_net_value.f_2 |floatformat}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_net_value.f_3 %} {{data.projection_table.p_net_value.f_3 |floatformat}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_net_value.f_4 %} {{data.projection_table.p_net_value.f_4 |floatformat}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_net_value.f_5 %} {{data.projection_table.p_net_value.f_5 |floatformat}} {%else%} -- {% endif %}</td>

													<input hidden name="net_value_[]" {% if data.projection_table.p_net_value.f_1 %} value={{data.projection_table.p_net_value.f_1}}  {% else %} value=0 {% endif %}>
													<input hidden name="net_value_[]" {% if data.projection_table.p_net_value.f_2 %} value={{data.projection_table.p_net_value.f_2}}  {% else %} value=0 {% endif %}>
													<input hidden name="net_value_[]" {% if data.projection_table.p_net_value.f_3 %} value={{data.projection_table.p_net_value.f_3}}  {% else %} value=0 {% endif %}>
													<input hidden name="net_value_[]" {% if data.projection_table.p_net_value.f_4 %} value={{data.projection_table.p_net_value.f_4}}  {% else %} value=0 {% endif %}>
													<input hidden name="net_value_[]" {% if data.projection_table.p_net_value.f_5 %} value={{data.projection_table.p_net_value.f_5}}  {% else %} value=0 {% endif %}>
												</tr>

												<tr id="current_depreciation">
													<th scope="row">Current Depreciation</th>
													<td>{% if data.projection_table.p_current_depreciation.f_1 %} {{data.projection_table.p_current_depreciation.f_1 |floatformat}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_current_depreciation.f_2 %} {{data.projection_table.p_current_depreciation.f_2 |floatformat}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_current_depreciation.f_3 %} {{data.projection_table.p_current_depreciation.f_3 |floatformat}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_current_depreciation.f_4 %} {{data.projection_table.p_current_depreciation.f_4 |floatformat}} {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_current_depreciation.f_5 %} {{data.projection_table.p_current_depreciation.f_5 |floatformat}} {%else%} -- {% endif %}</td>

													<input hidden name="current_depreciation_[]" {% if data.projection_table.p_current_depreciation.f_1 %} value={{data.projection_table.p_current_depreciation.f_1}}  {% else %} value=0 {% endif %}>
													<input hidden name="current_depreciation_[]" {% if data.projection_table.p_current_depreciation.f_2 %} value={{data.projection_table.p_current_depreciation.f_2}}  {% else %} value=0 {% endif %}>
													<input hidden name="current_depreciation_[]" {% if data.projection_table.p_current_depreciation.f_3 %} value={{data.projection_table.p_current_depreciation.f_3}}  {% else %} value=0 {% endif %}>
													<input hidden name="current_depreciation_[]" {% if data.projection_table.p_current_depreciation.f_4 %} value={{data.projection_table.p_current_depreciation.f_4}}  {% else %} value=0 {% endif %}>
													<input hidden name="current_depreciation_[]" {% if data.projection_table.p_current_depreciation.f_5 %} value={{data.projection_table.p_current_depreciation.f_5}}  {% else %} value=0 {% endif %}>
												</tr>

												<tr id="capex_average_depreciation_rate">
													<th scope="row">Average Depreciation Rate (%)</th>
													<td>{% if data.projection_table.p_capex_average_depreciation_rate.f_1 %} {% widthratio data.projection_table.p_capex_average_depreciation_rate.f_1 1 100 %}% {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_capex_average_depreciation_rate.f_2 %} {% widthratio data.projection_table.p_capex_average_depreciation_rate.f_2 1 100 %}% {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_capex_average_depreciation_rate.f_3 %} {% widthratio data.projection_table.p_capex_average_depreciation_rate.f_3 1 100 %}% {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_capex_average_depreciation_rate.f_4 %} {% widthratio data.projection_table.p_capex_average_depreciation_rate.f_4 1 100 %}% {%else%} -- {% endif %}</td>
													<td>{% if data.projection_table.p_capex_average_depreciation_rate.f_5 %} {% widthratio data.projection_table.p_capex_average_depreciation_rate.f_5 1 100 %}% {%else%} -- {% endif %}</td>

													<input hidden name="capex_average_depreciation_rate_[]" {% if data.projection_table.p_capex_average_depreciation_rate.f_1 %} value={{data.projection_table.p_capex_average_depreciation_rate.f_1}}  {% else %} value=0 {% endif %}>
													<input hidden name="capex_average_depreciation_rate_[]" {% if data.projection_table.p_capex_average_depreciation_rate.f_2 %} value={{data.projection_table.p_capex_average_depreciation_rate.f_2}}  {% else %} value=0 {% endif %}>
													<input hidden name="capex_average_depreciation_rate_[]" {% if data.projection_table.p_capex_average_depreciation_rate.f_3 %} value={{data.projection_table.p_capex_average_depreciation_rate.f_3}}  {% else %} value=0 {% endif %}>
													<input hidden name="capex_average_depreciation_rate_[]" {% if data.projection_table.p_capex_average_depreciation_rate.f_4 %} value={{data.projection_table.p_capex_average_depreciation_rate.f_4}}  {% else %} value=0 {% endif %}>
													<input hidden name="capex_average_depreciation_rate_[]" {% if data.projection_table.p_capex_average_depreciation_rate.f_5 %} value={{data.projection_table.p_capex_average_depreciation_rate.f_5}}  {% else %} value=0 {% endif %}>
												</tr>											
												
											</tbody>
										</table>
										<br>

				</div>
<!-- Capex Projection table end -->

		               





					<br>
			<br>
			<hr>
			<div class="form-row">
				<div class="col-md-4 text-center p-1">
					<a class="btn btn-primary"  href="/superplan_form_number/10"><i class="fas fa-arrow-circle-left"></i> Previous form</a>
				</div>

				<div class="col-md-4 text-center p-1">
					<button class="btn btn-success" type="submit"> <b> Save & Next </b></button>
				</div>

				<div class="col-md-4 text-center p-1">
					<a class="btn btn-danger"  href="/superplan_form_number/12">Skip <i class="fas fa-arrow-circle-right"></i></i></a>
				</div>

			</div>
					
		</div>
	</div>
</form>
</div>
</div>
</div>
</div>


<script>

/******************************************* Scripts ************************************************************/
function numberWithCommas(x) {
	x=x.toFixed(3);
	var mon="{{data.denomination}}";
	if(mon && mon=="Lakh"){
		nfObject = new Intl.NumberFormat('en-IN'); 
	}
	else{
		nfObject = new Intl.NumberFormat('en-US'); 
	}
    return (nfObject.format(x));
}



$(".ptext_input").on("input",function(){
	var inp_name = $(this).attr("name");
	var all_inps = $('input[name="'+inp_name+'"]');




	var prev=$(all_inps[0]).val();
	if(prev && !isNaN(prev))
		{
			prev = parseFloat(prev);
		}

	else
	{
		prev=0;
	}




	var his = find_historicals(inp_name);
	if(his!=null)
	{
		var prev=his+parseInt(his*(prev/100));
	}





	var temp_array =[prev];


	for(var i=1;i<all_inps.length;i++)
	{
		var temp_val = $(all_inps[i]).val();
		if(temp_val && !isNaN(temp_val))
		{
			temp_val=parseFloat(temp_val)/100;
			var temp = parseInt(prev*(temp_val+1));
			temp_array.push(temp);
			prev = temp;
		}
		else
		{
		
			temp_array.push(0);
		}
		
	}

	row_name = inp_name.replace("[]","");
	var table_row=$("#"+row_name+" td");
	var table_inputs=$("input[name='"+row_name+"_[]']");

	for(var i=0;i<table_row.length;i++)
	{
		
		$(table_row[i]).html(numberWithCommas(temp_array[i]));
		$(table_inputs)[i].value=temp_array[i];

	}
	closing_gross();
	
});




$(".ptext_input_smp").on("input",function(){
	var inp_name = $(this).attr("name");
	var all_inps = $('input[name="'+inp_name+'"]');
	var temp_array =[];
	for(var i=0;i<all_inps.length;i++)
	{
		var temp_val = $(all_inps[i]).val();
		if(temp_val && !isNaN(temp_val))
		{
			temp_val=parseFloat(temp_val);
			temp_array.push(temp_val);
		}
		else
		{
		
			temp_array.push(0);
		}
		
	}

	row_name = inp_name.replace("[]","");
	var table_row=$("#"+row_name+" td");
	var table_inputs=$("input[name='"+row_name+"_[]']");

	for(var i=0;i<table_row.length;i++)
	{
		$(table_row[i]).html(temp_array[i]+"%");
		$(table_inputs)[i].value=(temp_array[i]/100);
		

	}
	capex_rem();
});




$("input[name='capex_opening_gross[]']").on("input",function(){
	var op=$("input[name='capex_opening_gross[]']")[0].value;

	var open_g_td=$("#capex_opening_gross td");
	var open_g_inp=$("input[name='capex_opening_gross_[]']");

	$(open_g_td[0]).html(numberWithCommas(op));
	$(open_g_inp)[0].value=op;

	closing_gross();
});




function find_historicals(col_name){
	var col_val;

	if(col_name)
	{
		if(col_name=="capex_opening_gross[]")
		{
			col_val="{{data.historical_xl_data.capex_schedule_opening_gross.f_3}}";
		}

		else if(col_name=="capex_additions[]")
		{
			col_val="{{data.historical_xl_data.capex_schedule_additions.f_3}}";
		}

		else if(col_name=="capex_additions_intangible[]")
		{
			col_val="{{data.historical_xl_data.capex_schedule_additions_intangible.f_3}}";
		}

		else if(col_name=="capex_deletions[]")
		{
			col_val="{{data.historical_xl_data.capex_schedule_deletions.f_3}}";
		}

		else if(col_name=="capex_average_depreciation_rate[]")
		{
			col_val="{{data.historical_xl_data.capex_schedule_average_depreciation_rate.f_3}}";
		}

	}

	if(col_val){
		return parseFloat(col_val);
	}
	else{
		return null;
	}
	
}






/*       					Semi Calculation 						*/














function closing_gross(){
	var total_cg = $("#closing_gross td");
	var table=$("input[name='closing_gross_[]']");

	
	var open_g_td=$("#capex_opening_gross td");
	var open_g_inp=$("input[name='capex_opening_gross_[]']");




	
		var total = 0;
		var v1= $("input[name='capex_opening_gross_[]']")[0].value;
		var v2= $("input[name='capex_additions_[]']")[0].value;
		var v3= $("input[name='capex_additions_intangible_[]']")[0].value;
		var v4= $("input[name='capex_deletions_[]']")[0].value;

		if(v1){total=parseFloat(v1)};
		if(v2){total+=parseFloat(v2)};
		if(v3){total+=parseFloat(v3)};
		if(v4){total-=parseFloat(v4)};

		$(total_cg[0]).html(numberWithCommas(total));
		$(table)[0].value=total;
	
		$(open_g_td[1]).html(numberWithCommas(total));
		$(open_g_inp)[1].value=total;




		var total = 0;
		var v1= $("input[name='capex_opening_gross_[]']")[1].value;
		var v2= $("input[name='capex_additions_[]']")[1].value;
		var v3= $("input[name='capex_additions_intangible_[]']")[1].value;
		var v4= $("input[name='capex_deletions_[]']")[1].value;

		if(v1){total=parseFloat(v1)};
		if(v2){total+=parseFloat(v2)};
		if(v3){total+=parseFloat(v3)};
		if(v4){total-=parseFloat(v4)};

		$(total_cg[1]).html(numberWithCommas(total));
		$(table)[1].value=total;
	
		$(open_g_td[2]).html(numberWithCommas(total));
		$(open_g_inp)[2].value=total;



		var total = 0;
		var v1= $("input[name='capex_opening_gross_[]']")[2].value;
		var v2= $("input[name='capex_additions_[]']")[2].value;
		var v3= $("input[name='capex_additions_intangible_[]']")[2].value;
		var v4= $("input[name='capex_deletions_[]']")[2].value;

		if(v1){total=parseFloat(v1)};
		if(v2){total+=parseFloat(v2)};
		if(v3){total+=parseFloat(v3)};
		if(v4){total-=parseFloat(v4)};

		$(total_cg[2]).html(numberWithCommas(total));
		$(table)[2].value=total;
	
		$(open_g_td[3]).html(numberWithCommas(total));
		$(open_g_inp)[3].value=total;



		var total = 0;
		var v1= $("input[name='capex_opening_gross_[]']")[3].value;
		var v2= $("input[name='capex_additions_[]']")[3].value;
		var v3= $("input[name='capex_additions_intangible_[]']")[3].value;
		var v4= $("input[name='capex_deletions_[]']")[3].value;

		if(v1){total=parseFloat(v1)};
		if(v2){total+=parseFloat(v2)};
		if(v3){total+=parseFloat(v3)};
		if(v4){total-=parseFloat(v4)};

		$(total_cg[3]).html(numberWithCommas(total));
		$(table)[3].value=total;
	
		$(open_g_td[4]).html(numberWithCommas(total));
		$(open_g_inp)[4].value=total;



		var total = 0;
		var v1= $("input[name='capex_opening_gross_[]']")[4].value;
		var v2= $("input[name='capex_additions_[]']")[4].value;
		var v3= $("input[name='capex_additions_intangible_[]']")[4].value;
		var v4= $("input[name='capex_deletions_[]']")[4].value;

		if(v1){total=parseFloat(v1)};
		if(v2){total+=parseFloat(v2)};
		if(v3){total+=parseFloat(v3)};
		if(v4){total-=parseFloat(v4)};

		$(total_cg[4]).html(numberWithCommas(total));
		$(table)[4].value=total;
		
		


	
capex_rem();


}





function capex_rem(){

	var v1= $("input[name='capex_opening_gross_[]']"); 			// Opening Gross----------------> 4 [C D E F G]
	var v2= $("input[name='capex_additions_[]']");				// Additions--------------------> 5 [C D E F G]
	var v3= $("input[name='capex_additions_intangible_[]']");	// Additions - Intangible-------> 6 [C D E F G]
	var v4= $("input[name='capex_deletions_[]']");				// Deletions--------------------> 7 [C D E F G]
	var v5= $("input[name='closing_gross_[]']");				// Closing Gross----------------> 8 [C D E F G]
	var v6= $("input[name='capex_average_depreciation_rate_[]']");// Average Depreciation Rate -> 13 [C D E F G]



	var temp=0;														// Current Depreciation [C11]
	temp=parseFloat(v5[0].value)*parseFloat(v6[0].value);
	
	$("input[name='current_depreciation_[]']")[0].value=temp;
	$($("#current_depreciation td")[0]).html(numberWithCommas(temp));


	$("input[name='accumulated_depreciation_[]']")[0].value=temp; 	// Accumulated Depreciation [C9]
	$($("#accumulated_depreciation td")[0]).html(numberWithCommas(temp));


									
	temp=parseFloat(v5[0].value)-temp;											// Net value [C10]
	$("input[name='net_value_[]']")[0].value=temp; 	
	$($("#net_value td")[0]).html(numberWithCommas(Math.round(temp)));






	temp=0;															// Current Depreciation [D11]
	temp=(((parseFloat($("input[name='net_value_[]']")[0].value)+parseFloat(v2[1].value)+parseFloat(v3[1].value))-parseFloat(v4[1].value))*parseFloat(v6[1].value));			
	$("input[name='current_depreciation_[]']")[1].value=temp; 
	$($("#current_depreciation td")[1]).html(numberWithCommas(Math.round(temp)));


	temp=0;															// Accumulated Depreciation [D9]
	temp=parseFloat($("input[name='accumulated_depreciation_[]']")[0].value)+parseFloat($("input[name='current_depreciation_[]']")[1].value);
	$("input[name='accumulated_depreciation_[]']")[1].value=temp; 	
	$($("#accumulated_depreciation td")[1]).html(numberWithCommas(Math.round(temp)));



	temp=parseFloat(v5[1].value)-temp;											// Net value [D10]
	$("input[name='net_value_[]']")[1].value=temp; 	
	$($("#net_value td")[1]).html(numberWithCommas(Math.round(temp)));







	temp=0;															// Current Depreciation [E11]
	temp=(((parseFloat($("input[name='net_value_[]']")[1].value)+parseFloat(v2[2].value)+parseFloat(v3[2].value))-parseFloat(v4[2].value))*parseFloat(v6[2].value));			
	$("input[name='current_depreciation_[]']")[2].value=temp; 
	$($("#current_depreciation td")[2]).html(numberWithCommas(Math.round(temp)));


	temp=0;															// Accumulated Depreciation [E9]
	temp=parseFloat($("input[name='accumulated_depreciation_[]']")[1].value)+parseFloat($("input[name='current_depreciation_[]']")[2].value);
	$("input[name='accumulated_depreciation_[]']")[2].value=temp; 	
	$($("#accumulated_depreciation td")[2]).html(numberWithCommas(Math.round(temp)));


	temp=parseFloat(v5[2].value)-temp;											// Net value [E10]
	$("input[name='net_value_[]']")[2].value=temp; 	
	$($("#net_value td")[2]).html(numberWithCommas(Math.round(temp)));





	temp=0;															// Current Depreciation [F11]
	temp=(((parseFloat($("input[name='net_value_[]']")[2].value)+parseFloat(v2[3].value)+parseFloat(v3[3].value))-parseFloat(v4[3].value))*parseFloat(v6[3].value));			
	$("input[name='current_depreciation_[]']")[3].value=temp; 
	$($("#current_depreciation td")[3]).html(numberWithCommas(Math.round(temp)));


	temp=0;															// Accumulated Depreciation [F9]
	temp=parseFloat($("input[name='accumulated_depreciation_[]']")[2].value)+parseFloat($("input[name='current_depreciation_[]']")[3].value);
	$("input[name='accumulated_depreciation_[]']")[3].value=temp; 	
	$($("#accumulated_depreciation td")[3]).html(numberWithCommas(Math.round(temp)));

	temp=parseFloat(v5[3].value)-temp;											// Net value [F10]
	$("input[name='net_value_[]']")[3].value=temp; 	
	$($("#net_value td")[3]).html(numberWithCommas(Math.round(temp)));





	temp=0;															// Current Depreciation [G11]
	temp=(((parseFloat($("input[name='net_value_[]']")[3].value)+parseFloat(v2[4].value)+parseFloat(v3[4].value))-parseFloat(v4[4].value))*parseFloat(v6[4].value));			
	$("input[name='current_depreciation_[]']")[4].value=temp; 
	$($("#current_depreciation td")[4]).html(numberWithCommas(Math.round(temp)));


	temp=0;															// Accumulated Depreciation [G9]
	temp=parseFloat($("input[name='accumulated_depreciation_[]']")[3].value)+parseFloat($("input[name='current_depreciation_[]']")[4].value);
	$("input[name='accumulated_depreciation_[]']")[4].value=temp; 	
	$($("#accumulated_depreciation td")[4]).html(numberWithCommas(Math.round(temp)));

	temp=parseFloat(v5[4].value)-temp;											// Net value [G10]
	$("input[name='net_value_[]']")[4].value=temp; 	
	$($("#net_value td")[4]).html(numberWithCommas(Math.ceil(temp)));






}
















function projection(id){
	if($("#table"+id).is(':hidden'))
	{
		$("#table"+id).show()
		
	}
	else
	{
		$("#table"+id).hide()
	}
}




























/* Year dynamic change */

var year=0;
$("#year1_select").change(function(){
	var s_name = $(this).attr('name')
	var all_years = $('select[name="'+s_name+'"]')
	
	if(!isNaN($(this).val()))
	{
		year = parseInt($(this).val());
		for(var i=0;i<5;i++)
		{
			$('[name="'+s_name+'"]')[i].value=year+i;
		}
		projection_table_yr(year)
	}
	else
	{
		alert("Please correctly select the Year1");
		$('[name="'+s_name+'"]')[0].value="Year1";
		$('[name="'+s_name+'"]')[1].value="Year2";
		$('[name="'+s_name+'"]')[2].value="Year3";
		$('[name="'+s_name+'"]')[3].value="Year4";
		$('[name="'+s_name+'"]')[4].value="Year5";
	}
	
});



function projection_table_yr(yr){
	$(".year_1").html(yr);
	$(".year_2").html(yr+1);
	$(".year_3").html(yr+2);
	$(".year_4").html(yr+3);
	$(".year_5").html(yr+4);
}

</script>

{% endblock %}